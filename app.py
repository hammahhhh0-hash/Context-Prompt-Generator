import streamlit as st
import google.generativeai as genai

# ุฅุนุฏุงุฏุงุช ุงููุงุฌูุฉ
st.set_page_config(page_title="ุงููููุฌููู ุงูุณูุงูู ุงูุฎุงุฑู", page_icon="โก")
st.title("โก ุงููููุฌููู ุงูุณูุงูู ุงูุฎุงุฑู (Context Injector)")
st.markdown("ุฃุฏุงุฉ ููููุงูููู: ุญููู ููุงูู ุงูุนุงุฏูุฉ ุฅูู ุฃูุงูุฑ ุฎุงุฑูุฉ ูููููุง ChatGPT ูุฃูู ุดุฑููู.")

# ุฅุฏุฎุงู ููุชุงุญ API (ูุถุนู ุงููุณุชุฎุฏู ุฃู ุชุถุนู ุฃูุช)
api_key = st.text_input("AIzaSyC_rBAXmQiTtGtJIHwJaiy3Zg4MzXW4Wfw", type="password")

st.markdown("---")

# ุงูุฎุงูุฉ ุฃ: ุงููููุฉ (ุงูุฐุงูุฑุฉ)
st.subheader("1. ูู ุฃูุชุ (ุงูุณูุงู)")
context = st.text_area("ุฃุฏุฎู ูููุชูุ ูุฌุงู ุนูููุ ูุจุฑุฉ ุตูุชูุ ูุฃูุฏุงูู (ูุซุงู: ุฃูุง ููุงูู ุนูุงุฑู ูู ุฃูุงุฏูุฑุ ุฃุณุชูุฏู ุงููุณุชุซูุฑููุ ูุจุฑุชู ุฑุณููุฉ ููููุนุฉ).")

# ุงูุฎุงูุฉ ุจ: ุงููููุฉ
st.subheader("2. ูุงุฐุง ุชุฑูุฏุ (ุงููููุฉ)")
task = st.text_input("ูุซุงู: ุงูุชุจ ูู ุฅูููู ูุนุฑุถ ูุดุฑูุน ุชุฌุงุฑู ุฌุฏูุฏ.")

if st.button("๐ ุชูููุฏ ุงูุจุฑููุจุช ุงูุฎุงุฑู"):
    if not api_key:
        st.warning("ุงูุฑุฌุงุก ุฅุฏุฎุงู ููุชุงุญ API ุฃููุงู.")
    elif context and task:
        genai.configure(api_key=api_key)
        model = genai.GenerativeModel('models/gemini-1.5-flash-latest')
        
        # ููุฏุณุฉ ุงูุฃูุฑ ุงูุฐู ุณูุตูุน ุงูุฃูุฑ!
        system_logic = f"""
        ุฃูุช ุฎุจูุฑ ูู 'ููุฏุณุฉ ุงูุฃูุงูุฑ' (Prompt Engineering). 
        ุงููุณุชุฎุฏู ูุฏูู ูุฐุง ุงูุณูุงู/ุงููููุฉ: {context}
        ููุฑูุฏ ุฅูุฌุงุฒ ูุฐู ุงููููุฉ: {task}
        
        ูููุชู: ุงูุชุจ 'ุจุฑููุจุช' (Prompt) ุงุญุชุฑุงูู ุฌุฏุงู ูููุตูุ ุจุญูุซ ูุฃุฎุฐู ุงููุณุชุฎุฏู ูููุณุฎู ูู ChatGPT ููุญุตู ุนูู ูุชูุฌุฉ ูุฐููุฉ. 
        ูุฌุจ ุฃู ูุชุถูู ุงูุจุฑููุจุช ุงูุฐู ุณุชูุชุจู: ุฏูุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ ุณูุงู ุงููุณุชุฎุฏูุ ุงููููุฉ ุจุฏูุฉุ ุดูู ุงููุฎุฑุฌุงุช ุงููุทููุจุฉุ ููุจุฑุฉ ุงูุตูุช.
        ูุง ุชููุฐ ุงููููุฉุ ุจู ุงูุชุจ ุงูุจุฑููุจุช ุงูุฐู ุณูููุฐูุง.
        """
        
        with st.spinner("ุฌุงุฑู ุตูุงุบุฉ ุงูุฃูุฑ ุงูุฎุงุฑู..."):
            try:
                response = model.generate_content(system_logic)
                st.success("ุชู ุจูุฌุงุญ! ุงูุณุฎ ุงููุต ุจุงูุฃุณูู ูุถุนู ูู ChatGPT ุฃู Claude:")
                st.code(response.text, language='markdown')
            except Exception as e:
                st.error(f"ุญุฏุซ ุฎุทุฃ: {e}")
    else:
        st.error("ุงูุฑุฌุงุก ุชุนุจุฆุฉ ุฎุงูุฉ ุงูุณูุงู ูุงููููุฉ.")
